{"mappings":"AAEA,IAAIA,EAAa,ICAF,MAKbC,mBACE,MAAMC,EAAM,iHAAsEC,KAAKC,OACvF,OAAOC,MAAMH,GACVI,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,QAAEA,KACAA,IAKbC,cACE,MAAMR,EAAM,8GAAmEC,KAAKC,OAEpF,OADAO,QAAQC,IAAIV,GACLG,MAAMH,GACVI,MAAKC,GAAYA,EAASC,SAC1BF,MAAMG,GACEA,EAAQI,SAIrBC,sBACE,OAAOX,KAAKF,mBAAmBK,MAAKS,GAC3BZ,KAAKO,cAAcJ,MAAKU,GACtBD,EAAKE,KAAIC,IAAU,IACrBA,EACHC,aAAcD,EAAMC,aAAaC,MAAM,KAAK,GAC5CP,OAAQK,EAAMG,UACXJ,KAAIK,GAAMN,EAAWO,QAAOC,GAAMA,EAAGF,KAAOA,MAC5CG,eAhCXC,cACEvB,KAAKwB,YAAc,GACnBxB,KAAKC,KAAO,IDDd,MAAMwB,EAAUC,SAASC,cAAc,UACzC9B,EACGc,sBACAR,MAAKS,IACJJ,QAAQC,IAAIG,GAOd,SAAqBA,GACnBA,EAAKgB,SAAQ,SAASC,GAClB,IAAIC,EAAW,GACnBD,EAAQnB,OAAOkB,SAAQ,SAASG,GAC5BD,GAAYC,EAAMC,KAAK,OAGzB,IAAIC,EAAM,mFACuCJ,EAAQK,wIAGjDL,EAAQM,iFAGRL,sBAA6BD,EAAQb,yEAK7CS,EAAQW,mBAAmB,YAAaH,MAzB1CI,CAAWzB,MAEZ0B,OAAMC,IACL/B,QAAQC,IAAI,+BETH,MAAP+B,EAAOd,SAASC,cAAc,8BAC9Bc,EAAQf,SAASC,cAAc,+BAC/Be,EAAWhB,SAASC,cAAc,gBAgBlB,SAAbgB,IACNjB,SAASkB,KAAKC,UAAUC,OAAO,cAb3BN,EAAFO,iBAAiB,SAOC,WACpBrB,SAASkB,KAAKC,UAAUG,IAAI,iBAP/BP,EAAMM,iBAAiB,QAASJ,GAChCD,EAASK,iBAAiB,SAeI,SAAVE,GACdA,EAAEC,gBAAkBD,EAAEE,QACtBR,OAhBNS,OAAOL,iBAAiB,WAqBxB,SAAeE,GACA,WACJA,EAAEI,MAEbV,OCrCA,MAAMW,EAAO,CACXC,OAAQ7B,SAASC,cAAc,gBAC/B6B,UAAW9B,SAASC,cAAc,iBAClC8B,OAAQ/B,SAASC,cAAc,gBAC/B+B,SAAUhC,SAASC,cAAc,WAGnC2B,EAAKE,UAAUT,iBAAiB,SAEhC,SAAwBY,GACtBA,EAAMC,iBACNN,EAAKC,OAAOV,UAAUC,OAAO,UAC7BQ,EAAKE,UAAUX,UAAUG,IAAI,UAI/B,WACE,MAAMa,EAAS,8LAGfP,EAAKG,OAAOK,UAAYD,EAPxBE,GAUAT,EAAKI,SAASb,UAAUG,IAAI,qBCvB9B,MAAMgB,EAAQtC,SAASC,cAAc,gBAUrC,IAAmBE,EARnBmC,EAAMjB,iBAAiB,SAIvB,WACIK,OAAOa,SAAS,CAACC,IAAK,EAAGC,SAAU,cAJvCf,OAAOL,iBAAiB,UAOLlB,EAPyBmC,EAQjC,WACCZ,OAAOgB,YAAc1C,SAAS2C,gBAAgBC,aAClDzC,EAAQgB,UAAUG,IAAI,kBAKtBnB,EAAQgB,UAAUC,OAAO","sources":["src/js/renderTrendMovies.js","src/js/apiServices.js","src/js/modal.js","src/js/header.js","src/js/upBtn.js"],"sourcesContent":["import ApiService from './apiServices';\n\nlet apiService = new ApiService();\n\n  const gallery = document.querySelector('.cards');\napiService\n  .getGenreTrendMovies()\n  .then(data => {\n    console.log(data);\n    renderData(data);\n  })\n  .catch(err => {\n    console.log('error in function render');\n  });\n\n  function renderData (data){\n    data.forEach(function(element){\n        let genreStr = \"\";\n    element.genres.forEach(function(genre){\n        genreStr += genre.name+' ';\n    });\n        \n      let item =`<div class=\"movie_cards\">\n        <img src=\"https://image.tmdb.org/t/p/original${element.poster_path}\" alt=\"\" loading=\"lazy\" class='list__element' />\n        <div class=\"info\">\n        <p class=\"info_title\">\n            ${element.original_title}\n          </p>\n          <p class=\"info_genre\">\n            ${genreStr} </span> | <span> ${element.release_date}\n          </p>\n          \n        </div>\n      </div>`;\n      gallery.insertAdjacentHTML(\"beforeend\", item);\n    });\n    \n    \n}","const BASE_URL = `https://api.themoviedb.org/3`;\nconst KEY = `f83ab619d56ba761ff69bc866a8288d9`;\nexport default class ApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n  fetchTrendMovies() {\n    const url = `${BASE_URL}/trending/movie/week?api_key=${KEY}&language=en-US&page=${this.page}`;\n    return fetch(url)\n      .then(response => response.json())\n      .then(({ results }) => {\n        return results;\n      });\n  }\n\n\n  fetchGenres() {\n    const url = `${BASE_URL}/genre/movie/list?api_key=${KEY}&language=en-US&page=${this.page}`;\n    console.log(url);\n    return fetch(url)\n      .then(response => response.json())\n      .then( results  => {\n        return results.genres;\n      });\n  }\n\n  getGenreTrendMovies() {\n    return this.fetchTrendMovies().then(data => {\n      return this.fetchGenres().then(genresList => {\n        return data.map(movie => ({\n          ...movie,\n          release_date: movie.release_date.split('-')[0],\n          genres: movie.genre_ids\n            .map(id => genresList.filter(el => el.id === id))\n            .flat(),\n        }));\n      });\n    });\n  }\n}","\n// Основні змінні\n\nconst open = document.querySelector('[data-action=\"open-modal\"]');\nconst close = document.querySelector('[data-action=\"close-modal\"]');\nconst backdrop = document.querySelector('.js-backdrop');\n\n// Слухачі   \n\nopen.addEventListener('click', onOpen);\nclose.addEventListener('click', onClose);\nbackdrop.addEventListener('click', onBackdrop);\nwindow.addEventListener('keydown', onEsc);\n\n\n// Функція відкриття модалки\nfunction onOpen() {\n   document.body.classList.add('show-modal');\n}\n\n// Функція закриття модалки\nfunction onClose() {\n   document.body.classList.remove('show-modal');  \n}\n\n// Функція закриття модалки по кліку в Backdrop \nfunction onBackdrop(e) {\n   if(e.currentTarget === e.target) {\n      onClose(); \n   }\n}\n\n// Функція закриття модалки по Escape  \nfunction onEsc(e) {\nconst escKey = 'Escape',\nisEscKey = e.code === escKey;\nif(isEscKey) {\nonClose();   \n}\n}\n","const refs = {\n  homeEl: document.querySelector('.header-refs'),\n  libraryEl: document.querySelector('.refs-library'),\n  formEl: document.querySelector('.search-form'),\n  headerEl: document.querySelector('header'),\n};\n\nrefs.libraryEl.addEventListener('click', onLibraryClick);\n\nfunction onLibraryClick(event) {\n  event.preventDefault();\n  refs.homeEl.classList.remove('active');\n  refs.libraryEl.classList.add('active');\n  changeMarkup();\n  changeBackgroundImg();\n}\nfunction changeMarkup() {\n  const markup = `<ul class=\"list-btn\">\n <li class=\"list-btn-item\"><button type=\"button\" class=\"btn\">Watched</button></li>\n <li class=\"list-btn-item\"><button type=\"button\" class=\"btn\">queue</button></li>`;\n  refs.formEl.innerHTML = markup;\n}\nfunction changeBackgroundImg() {\n  refs.headerEl.classList.add('header-library');\n}\n","const upBtn = document.querySelector('[data-upbtn]');\n\nupBtn.addEventListener('click', scrollTop);\nwindow.addEventListener('scroll', hideUpBtn(upBtn))\n\n\nfunction scrollTop() {\n    window.scrollTo({top: 0, behavior: 'smooth'})\n}\n\nfunction hideUpBtn(element) {\n    return function hide() {\n        if (window.pageYOffset < document.documentElement.clientHeight) {\n        element.classList.add('visuallyhidden'); \n        // console.log(window.pageYOffset);\n        // console.log(document.documentElement.clientHeight);\n    }\n    else {\n        element.classList.remove('visuallyhidden');\n        // console.log(window.pageYOffset);\n        // console.log(document.documentElement.clientHeight);\n    }\n    }\n    \n}\n\n"],"names":["$9a274284394cbe8a$var$apiService","fetchTrendMovies","url","this","page","fetch","then","response","json","results","fetchGenres","console","log","genres","getGenreTrendMovies","data","genresList","map","movie","release_date","split","genre_ids","id","filter","el","flat","constructor","searchQuery","$9a274284394cbe8a$var$gallery","document","querySelector","forEach","element","genreStr","genre","name","item","poster_path","original_title","insertAdjacentHTML","$9a274284394cbe8a$var$renderData","catch","err","$8a7e756c566dd1ea$var$open","$8a7e756c566dd1ea$var$close","$8a7e756c566dd1ea$var$backdrop","$8a7e756c566dd1ea$var$onClose","body","classList","remove","addEventListener","add","e","currentTarget","target","window","code","$8aad853c076397e7$var$refs","homeEl","libraryEl","formEl","headerEl","event","preventDefault","markup","innerHTML","$8aad853c076397e7$var$changeMarkup","$847794d47e5d1621$var$upBtn","scrollTo","top","behavior","pageYOffset","documentElement","clientHeight"],"version":3,"file":"index.86b21d60.js.map"}